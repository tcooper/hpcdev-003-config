<?xml version="1.0" standalone="no"?>

<kickstart>

<description>
	hpcdev-003 specific configuration common to all compute nodes.
</description>

<copyright>
	Copyright (c) 2000 - 2017 The Regents of the University of California.
	All rights reserved. Rocks(r) v6.2/v7.0 www.rocksclusters.org
</copyright>

<!--
     /etc/nsswitch.conf indicates sss be used as secondary option
     for name services. sss is part of SSSD - System Security Services Daemon
     (see https://pagure.io/SSSD/sssd/). Many libsss_* modules are
     included as part of the glibc package but libsss_autofs is not.

     Add it here to remove the warning from autofs when starting/restarting...
 -->
<package>libsss_autofs</package>

<post>
<!-- Services to turn off -->
/usr/bin/systemctl disable snmpd
/usr/bin/systemctl disable postfix
/usr/bin/systemctl disable atd
/usr/bin/systemctl disable crond

<!-- Clear mail queue -->
<file name="/etc/cron.weekly/clear_mailq.sh" perms="0755">
<![CDATA[#!/bin/bash
/usr/bin/postsuper -d ALL > /dev/null 2>&1
]]>
</file>

<file name="/etc/environment" mode="append">
BASH_ENV=~/.bashrc
</file>

<!-- remove file to ensure custom partitioning -->
rm -f /.rocks-release

</post>

</kickstart> 

